var LZMA=LZMA||{};
(function(d){d.iStream=function(b){this.array=new Uint8Array(b);this.size=b.byteLength;this.offset=0};d.iStream.prototype.readByte=function(){return this.array[this.offset++]};d.oStream=function(b){this.size=0;this.buffers=[];b=b||[];for(var c=0,h=b.length;c<h;c++)if(b[c]instanceof d.oStream)for(var e=b[c].buffers,f=0;f<e.length;f++)this.buffers.push(b[c].buffers[f]),this.size+=b[c].buffers[f].length;else this.buffers.push(b[c]),this.size+=b[c].length};d.oStream.prototype.writeBytes=function(b,c){if(c<=
b.byteLength)this.buffers.push(b.slice(0,c));else throw Error("Buffer too small?");this.size+=c};d.oStream.prototype.toUint8Array=function(){var b=this.size,c=this.buffers;if(1==c.length)return c[0];try{for(var d=new Uint8Array(b),e=0,f=0;e<c.length;e++)d.set(c[e],f),f+=c[e].length;c[0]=d;c.length=1;return d}catch(g){console.error("Error allocating Uint8Array of size: ",b),console.error("Message given was: ",g.toString())}return null};d.oStream.prototype.forEach=function(b){for(var c=0;c<this.buffers.length;c++)b.call(this,
this.buffers[c])};d.oStream.prototype.toCodePoints=function(){d.UTF8||this.toUint8Array();return d.UTF8.decode(this.toUint8Array())};d.oStream.prototype.toString=function(){var b=this.buffers,c="";d.UTF8&&(b=[this.toCodePoints()]);for(var h=0,e=b.length;h<e;h++)for(var f=0,g=b[h].length;f<g;f++)c+=String.fromCharCode(b[h][f]);return c}})(LZMA);var UTF8=UTF8||{};
(function(d){function b(a){for(var c=0,b=a.length;b--;)128!=(a[b]&192)&&++c;return c}function c(){if(g>=f)throw Error("Invalid byte index");var a=e[g++]&255;if(128==(a&192))return a&63;throw Error("Invalid continuation byte");}function h(){var a,b,d,k;if((g|0)>(f|0))throw Error("Invalid byte index");a=e[g]&255;g=g+1|0;if(0==(a&128))return a;if(192==(a&224)){b=c();a=(a&31)<<6|b;if(128<=a)return a;throw Error("Invalid continuation byte");}if(224==(a&240)){b=c();d=c();a=(a&15)<<12|b<<6|d;if(2048<=a){if(55296<=
a&&57343>=a)throw Error("Lone surrogate U+"+a.toString(16).toUpperCase()+" is not a scalar value");return a}throw Error("Invalid continuation byte");}if(240==(a&248)&&(b=c(),d=c(),k=c(),a=(a&7)<<18|b<<12|d<<6|k,65536<=a&&1114111>=a))return a;throw Error("Invalid UTF-8 detected");}var e,f,g;d.count=b;d.decode=function(a){var c=0,d=b(a),d=new Uint16Array(d);g=0;e=a;f=a.length;for(2<(f|0)&239==(e[0]|0)&187==(e[1]|0)&191==(e[2]|0)&&(g=3);(g|0)<(f|0);)a=h()|0,d[c++]=a;return d};"undefined"!=typeof LZMA&&
(LZMA.UTF8=d)})(UTF8);var LZMA=LZMA||{},WLZMA=WLZMA||{};
(function(d,b){function c(a){var b=a.data[0],c=a.data[1];a=a.data[2];var e=this.manager;this.idle=!0;e.idle++;if(-1==e.next||e.next>b)e.next=b;a?this.reject(a):c?this.resolve(new d.oStream(c)):this.reject(null);this.reject=this.resolve=null;f.call(e)}function h(){for(var a=this.listeners;a.length;)a.shift().call(this);this.isReady=!0}function e(a){var b=this.manager;if("ready"===a.data)this.onmessage=c,this.isReady=!0,b.started++,b.started==b.workers.length&&h.call(b);else throw Error("Worker did not startup!?");
}function f(){for(;this.queue.length&&this.idle;){var a=this.next,b=this.queue.shift();"function"==typeof b[0]&&(b[0]=b[0].call(this));var c=this.workers[a];if(!c)debugger;c.postMessage([a,b[0]],[b[0]]);c.resolve=b[1];c.reject=b[2];c.idle=!1;for(--this.idle;a<this.workers.length;a++)if(this.workers[a].idle){this.next=a;return}this.next=-1}}function g(a){"object"==typeof a&&(a instanceof d.iStream&&(a=a.array),a instanceof Uint8Array&&(a=a.buffer));return a}b.Manager=function(a,b){a=a||6;this.queue=
[];this.workers=[];b=b||"wlzma.wrk.min.js";this.listeners=[];this.isReady=!1;for(var c=this.started=0;c<a;c++){var d=new Worker(b);d.onmessage=e;this.workers.push(d);d.manager=this;d.idle=!0}this.idle=a;this.next=0};b.Manager.prototype.ready=function(a){this.isReady?a.call(this):this.listeners.push(a)};b.Manager.prototype.decode=function(a){var b=this;a=g(a);return new Promise(function(c,d){b.queue.push([a,c,d]);f.call(b)})}})(LZMA,WLZMA);
