/*
JavaScript LZMA Decompressor (https://github.com/jcmellado/js-lzma)
- Copyright (c) 2017 Juan Mellado (https://github.com/jcmellado)
- Copyright (c) 2017 Marcel Greter (http://github.com/mgreter)
*/;
var LZMA=LZMA||{};
(function(f){f.iStream=function(b){this.array=new Uint8Array(b);this.size=b.byteLength;this.offset=0};f.iStream.prototype.readByte=function(){return this.array[this.offset++]};f.oStream=function(b){this.size=0;this.buffers=[];b=b||[];for(var c=0,d=b.length;c<d;c++)if(b[c]instanceof f.oStream)for(var l=b[c].buffers,h=0;h<l.length;h++)this.buffers.push(b[c].buffers[h]),this.size+=b[c].buffers[h].length;else this.buffers.push(b[c]),this.size+=b[c].length};f.oStream.prototype.writeBytes=function(b,c){if(c<=
b.byteLength)this.buffers.push(b.slice(0,c));else throw Error("Buffer too small?");this.size+=c};f.oStream.prototype.toUint8Array=function(){var b=this.size,c=this.buffers;if(1==c.length)return c[0];try{for(var d=new Uint8Array(b),f=0,h=0;f<c.length;f++)d.set(c[f],h),h+=c[f].length;c[0]=d;c.length=1;return d}catch(k){console.error("Error allocating Uint8Array of size: ",b),console.error("Message given was: ",k.toString())}return null};f.oStream.prototype.forEach=function(b){for(var c=0;c<this.buffers.length;c++)b.call(this,
this.buffers[c])};f.oStream.prototype.toCodePoints=function(){f.UTF8||this.toUint8Array();return f.UTF8.decode(this.toUint8Array())};f.oStream.prototype.toString=function(){var b=this.buffers,c="";f.UTF8&&(b=[this.toCodePoints()]);for(var d=0,l=b.length;d<l;d++)for(var h=0,k=b[d].length;h<k;h++)c+=String.fromCharCode(b[d][h]);return c}})(LZMA);var UTF8=UTF8||{};
(function(f){function b(a){for(var g=0,e=a.length;e--;)128!=(a[e]&192)&&++g;return g}function c(){if(k>=h)throw Error("Invalid byte index");var a=l[k++]&255;if(128==(a&192))return a&63;throw Error("Invalid continuation byte");}function d(){var a,g,e,b;if((k|0)>(h|0))throw Error("Invalid byte index");a=l[k]&255;k=k+1|0;if(0==(a&128))return a;if(192==(a&224)){g=c();a=(a&31)<<6|g;if(128<=a)return a;throw Error("Invalid continuation byte");}if(224==(a&240)){g=c();e=c();a=(a&15)<<12|g<<6|e;if(2048<=a){if(55296<=
a&&57343>=a)throw Error("Lone surrogate U+"+a.toString(16).toUpperCase()+" is not a scalar value");return a}throw Error("Invalid continuation byte");}if(240==(a&248)&&(g=c(),e=c(),b=c(),a=(a&7)<<18|g<<12|e<<6|b,65536<=a&&1114111>=a))return a;throw Error("Invalid UTF-8 detected");}var l,h,k;f.count=b;f.decode=function(a){var g=0,e=b(a),e=new Uint16Array(e);k=0;l=a;h=a.length;for(2<(h|0)&239==(l[0]|0)&187==(l[1]|0)&191==(l[2]|0)&&(k=3);(k|0)<(h|0);)a=d()|0,e[g++]=a;return e};"undefined"!=typeof LZMA&&
(LZMA.UTF8=f)})(UTF8);var LZMA=LZMA||{},WLZMA=WLZMA||{};
(function(f,b){function c(a){var g=a.data[0],e=a.data[1];a=a.data[2];var b=this.manager;this.idle=!0;b.idle++;if(-1==b.next||b.next>g)b.next=g;a?this.reject(a):e?this.resolve(new f.oStream(e)):this.reject(null);this.reject=this.resolve=null;h.call(b)}function d(){for(var a=this.listeners;a.length;)a.shift().call(this);this.isReady=!0}function l(a){var b=this.manager;if("ready"===a.data)this.onmessage=c,this.isReady=!0,b.started++,b.started==b.workers.length&&d.call(b);else throw Error("Worker did not startup!?");
}function h(){for(;this.queue.length&&this.idle;){var a=this.next,b=this.queue.shift();"function"==typeof b[0]&&(b[0]=b[0].call(this));var e=this.workers[a];if(!e)debugger;e.postMessage([a,b[0]],[b[0]]);e.resolve=b[1];e.reject=b[2];e.idle=!1;for(--this.idle;a<this.workers.length;a++)if(this.workers[a].idle){this.next=a;return}this.next=-1}}function k(a){"object"==typeof a&&(a instanceof f.iStream&&(a=a.array),a instanceof Uint8Array&&(a=a.buffer));return a}b.wrkurl=b.wrkurl||"wlzma.wrk.js";b.Manager=
function(a,c){a=a||6;this.queue=[];this.workers=[];c=c||b.wrkurl;this.listeners=[];this.isReady=!1;for(var e=this.started=0;e<a;e++){var d=new Worker(c);d.onmessage=l;this.workers.push(d);d.manager=this;d.idle=!0}this.idle=a;this.next=0};b.Manager.prototype.ready=function(a){this.isReady?a.call(this):this.listeners.push(a)};b.Manager.prototype.decode=function(a){var b=this;a=k(a);return new Promise(function(c,d){b.queue.push([a,c,d]);h.call(b)})}})(LZMA,WLZMA);var PWLZMA=PWLZMA||{};
(function(f,b){b.decode=function(b,d,l){d instanceof ArrayBuffer&&(d=new f.iStream(d));return new Promise(function(h,k){var a=[];if(80!==d.readByte()||76!==d.readByte()||90!==d.readByte()||77!==d.readByte()||65!==d.readByte()||49!==d.readByte())throw Error("Invalid PLZMA1 header!");for(var g=d.readByte(),g=g+(d.readByte()<<8),g=g+(d.readByte()<<16),g=g+(d.readByte()<<24),e=0;e<g;e++)a[e]=d.readByte()<<0,a[e]+=d.readByte()<<8,a[e]+=d.readByte()<<16,a[e]+=d.readByte()<<24;for(var l=[],m=10+4*g,n=d.array.buffer,
e=0;e<g;e++)(function(d,e){l.push(b.decode(function(){return n.slice(e,e+a[d])}))})(e,m),m+=a[e];Promise.all(l).then(function(a){h(new f.oStream(a))})["catch"](k)})}})(LZMA,PWLZMA);
